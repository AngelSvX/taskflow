generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model profiles {
  id         Int     @id @default(autoincrement())
  user_id    Int     @unique
  bio        String?
  avatar_url String?
  users      users   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model projects {
  id          Int       @id @default(autoincrement())
  user_id     Int
  title       String    @db.VarChar(150)
  description String?
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  users       users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tasks       tasks[]
}

model tags {
  id        Int         @id @default(autoincrement())
  name      String      @unique @db.VarChar(50)
  task_tags task_tags[]
}

model task_tags {
  task_id Int
  tag_id  Int
  tags    tags  @relation(fields: [tag_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tasks   tasks @relation(fields: [task_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([task_id, tag_id])
}

model tasks {
  id           Int         @id @default(autoincrement())
  project_id   Int
  title        String      @db.VarChar(150)
  is_completed Boolean?    @default(false)
  due_date     DateTime?   @db.Date
  created_at   DateTime?   @default(now()) @db.Timestamp(6)
  task_tags    task_tags[]
  projects     projects    @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model users {
  id         Int        @id @default(autoincrement())
  email      String     @unique @db.VarChar(100)
  name       String     @db.VarChar(100)
  password   String     @db.VarChar(100)
  created_at DateTime?  @default(now()) @db.Timestamp(6)
  profiles   profiles?
  projects   projects[]
}
